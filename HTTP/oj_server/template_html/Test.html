<!DOCTYPE html>
<html>
<head>
    <title>调整组件大小</title>
    <style>
        .container {
            display: flex;
            height: 400px;
        }

        .component1 {
            flex-basis: 40%;
            background-color: #f1f1f1;
            overflow: auto;
        }

        .component2 {
            flex-basis: 60%;
            background-color: #dcdcdc;
            overflow: auto;
        }

        .resize-handle {
            width: 5px;
            cursor: col-resize;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .resize-handle:hover {
            background-color: #E3E3E6;
        }
        

        .resize-handle::before {
            content: "";
            width: 60%;
            height: 20px;
            background-color: black;
        }
    </style>
</head>

<body>
<div class="container">
    <div class="component1" id="component1">组件1</div>
    <div class="resize-handle"></div>
    <div class="component2" id="component2">组件2</div>
</div>

<script>
    const component1 = document.getElementById('component1');
    const component2 = document.getElementById('component2');
    const resizeHandle = document.querySelector('.resize-handle');
    let isResizing = false;
    let startX;
    let startWidth;

    resizeHandle.addEventListener('mousedown', startResize);
    window.addEventListener('mouseup', stopResize);
    window.addEventListener('mousemove', resize);

    function startResize(e) {
        isResizing = true;
        startX = e.clientX;
        startWidth = component1.offsetWidth;
    }

    function stopResize() {
        isResizing = false;
    }

    function resize(e) {
        if (!isResizing) return;
        const diffX = e.clientX - startX;
        const newWidth = startWidth + diffX;
        const containerWidth = component1.parentNode.offsetWidth;
        const minWidth = containerWidth * 0.1; // 最小宽度为容器宽度的10%

        if (newWidth > minWidth) {
            component1.style.flexBasis = `${newWidth / containerWidth * 100}%`;
            component2.style.flexBasis = `${100 - newWidth / containerWidth * 100}%`;
        } else if (newWidth <= minWidth && component1.style.flexBasis !== '0%') {
            component1.style.flexBasis = '0%';
            component2.style.flexBasis = '100%';
        }

        // 当 component1 大小为 0% 时，点击 resize-handle 后将其大小变为 30%
        if (component1.style.flexBasis === '0%') {
            resizeHandle.addEventListener('click', setComponent1Size);
        } else {
            resizeHandle.removeEventListener('click', setComponent1Size);
        }
    }

    function setComponent1Size() {
        component1.style.flexBasis = '30%';
        component2.style.flexBasis = '70%';
    }
</script>
</body>
</html>